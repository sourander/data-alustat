
<!doctype html>
<html lang="fi" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../data_alustat/terminologia/">
      
      
        <link rel="next" href="../storage/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Ingestion - Data-alustat</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#saas-vs-diy" class="md-skip">
          Hyppää sisältöön
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Ylätunniste">
    <a href="../.." title="Data-alustat" class="md-header__button md-logo" aria-label="Data-alustat" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Data-alustat
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Ingestion
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Hae" placeholder="Hae" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Haku">
        
        <button type="reset" class="md-search__icon md-icon" title="Tyhjää" aria-label="Tyhjää" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Aloitetaan hakua
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigaatio" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Data-alustat" class="md-nav__button md-logo" aria-label="Data-alustat" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Data-alustat
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tervetuloa kurssille
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Data-alustat
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Data-alustat
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_alustat/historia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Historia
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_alustat/hyodyt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hyödyt bisnekselle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_alustat/arkkitehtuurit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arkkitehtuurit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_alustat/olap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OLAP vs OLTP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_alustat/terminologia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Terminologia
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Kerrokset
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Kerrokset
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Ingestion
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Ingestion
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Sisällysluettelo">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Sisällysluettelo
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#saas-vs-diy" class="md-nav__link">
    <span class="md-ellipsis">
      SaaS vs. DIY
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tietolahteet" class="md-nav__link">
    <span class="md-ellipsis">
      Tietolähteet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tietolähteet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tietokannat" class="md-nav__link">
    <span class="md-ellipsis">
      Tietokannat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tietokannat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sql-ja-nosql" class="md-nav__link">
    <span class="md-ellipsis">
      SQL ja noSQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timestamp-cdc" class="md-nav__link">
    <span class="md-ellipsis">
      Timestamp CDC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary-log-cdc" class="md-nav__link">
    <span class="md-ellipsis">
      Binary Log CDC
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tiedostot" class="md-nav__link">
    <span class="md-ellipsis">
      Tiedostot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iot" class="md-nav__link">
    <span class="md-ellipsis">
      IoT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#streaming" class="md-nav__link">
    <span class="md-ellipsis">
      Streaming
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-pages" class="md-nav__link">
    <span class="md-ellipsis">
      Web pages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../processor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Processor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serving/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Serving
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tietomalli
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tietomalli
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tietomalli/tietomalli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tietomalli
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tietomalli/kuutio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OLAP-kuutio
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Sisällysluettelo">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Sisällysluettelo
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#saas-vs-diy" class="md-nav__link">
    <span class="md-ellipsis">
      SaaS vs. DIY
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tietolahteet" class="md-nav__link">
    <span class="md-ellipsis">
      Tietolähteet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tietolähteet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tietokannat" class="md-nav__link">
    <span class="md-ellipsis">
      Tietokannat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tietokannat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sql-ja-nosql" class="md-nav__link">
    <span class="md-ellipsis">
      SQL ja noSQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timestamp-cdc" class="md-nav__link">
    <span class="md-ellipsis">
      Timestamp CDC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary-log-cdc" class="md-nav__link">
    <span class="md-ellipsis">
      Binary Log CDC
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tiedostot" class="md-nav__link">
    <span class="md-ellipsis">
      Tiedostot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iot" class="md-nav__link">
    <span class="md-ellipsis">
      IoT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#streaming" class="md-nav__link">
    <span class="md-ellipsis">
      Streaming
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-pages" class="md-nav__link">
    <span class="md-ellipsis">
      Web pages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Ingestion</h1>

<p>Tietolähteitä on monenlaisia. Huomaa, että kaikkia näitä voidaan tuoda tietoalustaan ETL tai ELT -työnkulkua noudattaen. Kirjaimet edustavat sanoja Extract, Transform, Load. Tiivistetysti ETL:n ja ELT:n ero on siinä, että ETL:ssä dataa muokataan ennen tietovarastoon vientiä, kun taas ELT:ssä dataa muokataan vasta tietovarastoon viennin jälkeen.</p>
<p>Nykyisin ELT on yleisempi lähestymistapa. Syitä tälle on monia, kuten:</p>
<ul>
<li>ETL:n T on vaikea määritellä pysyvästi. Jos T:n määritelmä muuttuu, data joudutaan hakemaan alusta alkaen uusiksi tietovarastoon.</li>
<li>Raakadata itsessään voi olla hyödyllistä koneoppimisen näkökulmasta.</li>
</ul>
<p>Ajoittain törmää myös termiin EtLT, jolla korostetaan sitä, että Extractin ja Loadin välillä pienimuotoista datan käsittelyä. Dataa ei siis välttämättä muokata lopulliseen tietovaraston tarvitsemaa muotoon, mutta sitä saatetaan käsitellä esimerkiksi anonymisoinnin tai pseudonymisoinnin vuoksi, surrogaattiavainten laskemiseksi, tai muiden syiden vuoksi. </p>
<h2 id="saas-vs-diy">SaaS vs. DIY</h2>
<p>Tietoalustan rakentamiseen on useita eri lähestymistapoja. Yksi on rakentaa kaikki itse. Toinen on ostaa kaikki valmiina palveluna. Kolmas on yhdistää näitä kahta. Mikäli käytät ELT-lähestymistapaa, ingestion tool lataa tiedon joko Staging tai Bronze tasolle, riippuen miten olet halunnut määritellä sen. Tietoalustasi vastaa T-kirjaimen toteutuksesta eli eri tietolähteiden tiedojen mallintamisesta ja yhdistämisestä. Huomaa, että tämä on täysin modularisoitavissa. Sinulla voi olla rinnakkain useita eri ELT-työtyökaluja, joista kukin vastaa jostakin/joistakin tietolähteistä.</p>
<div class="admonition question">
<p class="admonition-title">Tehtävä</p>
<p>Tutustu seuraaviin SaaS-palveluihin. Mitä tietolähteitä ne tukevat?</p>
<ul>
<li><a href="https://www.fivetran.com/connectors">Fivetran</a></li>
<li><a href="https://airbyte.com/connectors">Airbyte (Cloud)</a></li>
<li><a href="https://aws.amazon.com/appflow/integrations/">AWS AppFlow</a></li>
<li><a href="https://learn.microsoft.com/en-us/fabric/data-factory/connector-overview">Microsoft Fabric Data Factory</a></li>
<li><a href="https://www.confluent.io/product/connectors/">Confluent</a></li>
</ul>
</div>
<p>Yksittäisiin työkaluihin tutustuminen on kuitenkin tämän kurssin skoopin ulkopuolella. Mikäli sinulla on oikea yrityksen case, kannattaa vertailuttaa useita eri tarjoajia. Valittuun tarjoajaan voi vaikuttaa myös yrityksesi jo valmiiksi käyttämä hyperscaler (AWS, Azure, Google.)</p>
<h2 id="tietolahteet">Tietolähteet</h2>
<p>Alla on käsiteltynä tyypillisiä tietolähteitä alkaen tietokannoita ja päättyen web-sivuihin, joista tieto ladataan web-scrapingin avulla.</p>
<h3 id="tietokannat">Tietokannat</h3>
<h4 id="sql-ja-nosql">SQL ja noSQL</h4>
<p>Eri SQL-kantojen (MySQL, MariaDB, Postgresql) ja noSQL-kantojen (MongoDB, Cassandra) dataa voi ladata eri strategioita hyödyntäen. SQL-kannoista palautuu lista monikkoja (<code>list[tuple]</code>), kun taas noSQL-kannoista palautuu JSON string tai lista sanakirjoja (<code>list[dict]</code>). Koska ingestion huolehtii vain latauksesta, ja T eli Transform tehdään vasta myöhemmissä vaiheissa, SQL ja noSQL saavat hyvin samankaltaisen kohtelun tässä vaiheessa: dumppaa data stagingiin ja murehdi myöhemmin.</p>
<ul>
<li>non-CDC: Full Load joka yö (naiivi)</li>
<li>CDC: Inkrementaalista kenttää hyötyntäen</li>
<li>CDC: Muutoshistorian lukeminen</li>
</ul>
<div class="admonition question">
<p class="admonition-title">Tehtävä</p>
<p>Lataukseen hyödynnetään tietokannan ajuria (JDBC/OBDC), joka mahdollistaa tietokannan lukemisen Pythonilla. Tyypillisesti nämä voi asentaa <code>pip</code>:n avulla. Tutustu seuraaviin paketteihin pintapuoleisesti: <code>pymysql</code>, <code>psycopg2</code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Termi CDC tarkoittaa Change Data Capture. Sillä tarkoitetaan lyhesti ottaen sitä, että lataustyökalu tai -skripti pyrkii hakemaan sen, mikä on uutta sitten edellisen haun. Tämä onnistuu esimerkiksi timestamp-kentän avulla, jolloin lataustyökalu tietää, että seuraavalla kerralla pitää hakea kaikki rivit, joiden timestamp on suurempi kuin edellisellä kerralla.</p>
</div>
<h4 id="timestamp-cdc">Timestamp CDC</h4>
<p>Aikakoodikenttään tai monotonisesti kasvavaan ID-kenttään perustuva inkrementaalinen lataus on äärimmäisen yksinkertainen. Ensimmäisellä latauskerralla haetaan aivan kaikki rivit. Jatkossa haetaan vain rivit, joissa inkrementaalinen kenttä on suurempi kuin edellisellä kerralla.</p>
<p>Suuret <code>SELECT * FROM table</code>-tyyliset kyselyt ovat tietokantapalvelimelle muistin- tai kiintolevynkäytön kannalta erittäin raskaita. Ethän aja vastaavia kyselyitä tuotantokantaa vasten. Kriittiset kannat on suositeltavaa replikoida erilliseen tietokantaan, josta lataus voidaan tehdä. Jos ELT-skriptin kuorma kaataa palvelimen tai täyttää sen levytilan, tuotanto ei kärsi. Tämä on kallista, mutta turvallisempaa kuin tuotantokannan kuormittaminen.</p>
<p>Äärimmäisen naiivi latausskriptin alku voisi olla seuraavanlainen:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Import pymysql library</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pymysql</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">imaginery_library</span><span class="w"> </span><span class="kn">import</span> <span class="n">write_as_parquet</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="c1"># Connect to the database</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="n">connection</span> <span class="o">=</span> <span class="n">pymysql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>                             <span class="n">user</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>                             <span class="n">password</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="p">,</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>                             <span class="n">db</span><span class="o">=</span><span class="s1">&#39;database&#39;</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="p">)</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="k">if</span> <span class="n">FULL_LOAD</span><span class="p">:</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>    <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM table&quot;</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="k">elif</span> <span class="n">CDC</span><span class="p">:</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>    <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT * FROM table WHERE timestamp &gt; </span><span class="si">{</span><span class="n">last_timestamp</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="c1"># Execute the query and dump to staging</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="n">write_as_csv</span><span class="p">(</span><span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>
</span></code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Timestamppiin perustuva inkrementaalinen lataus ei toteuta tietokannan poistoja laisinkaan. Tämä on potentiaalinen GDPR-rike. Tämän takia on suositeltavaa lukea muutoshistoriaa, jolloin poistotkin saadaan mukaan.</p>
</div>
<h4 id="binary-log-cdc">Binary Log CDC</h4>
<p>Binary log on tietokantapalvelimen alunperin sisäiseen käyttöön tarkoitettu lokitiedosto, joka sisältää kaikki tietokannan muutokset. Binary logia voi lukea myös ulkopuolinen sovellus, jolloin se toimii CDC:n tavoin. Tietokannat käyttävät lokitiedostoa muun muassa homogeeniseen replikointii (esim. MySQL =&gt; MySQL) sekä vikaantumistilanteiden varalle. Binary log pitää erikseen olla aktivoituna tietokannassa; se ei välttämättä ole oletuksena päällä. Lisäksi binlogia ei säilytetä ikuisesti, joten sinulla on n päivää replikoida muutokset ennen kuin ne katoavat. Itse muutokset sisältävät operaation tyypin (write, update, delete) sekä rivin vanhan ja uuden tilan.</p>
<p>Mikäli CDC:n haluaa toteuttaa muutoshistoriaan nojaten, voi olla järkevintä unohtaa kotikutoinen Python-skripti, ja ottaa käyttöön jokin kaupallinen palvelu tai avoimen lähdekoodin työkalu (esim. Apache Kafka + Debezium tai Airbyte.)</p>
<p>Jos kuitenkin haluat tutustua konseptiin Pythonin avulla, tämä onnistuu esimerkiksi <code>python-mysql-replication</code>-kirjastolla.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pymysqlreplication</span><span class="w"> </span><span class="kn">import</span> <span class="n">BinLogStreamReader</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pymysqlreplication.row_event</span><span class="w"> </span><span class="kn">import</span> <span class="n">WriteRowsEvent</span><span class="p">,</span> <span class="n">UpdateRowsEvent</span><span class="p">,</span> <span class="n">DeleteRowsEvent</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c1"># Start from log_file position log_pos.</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1"># Examples: log_file=&#39;mysql-bin.000003&#39;, log_pos=4</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="c1"># Keep only events that affect rows. Ignore e.g. DDL events.</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="n">stream</span> <span class="o">=</span> <span class="n">BinLogStreamReader</span><span class="p">(</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    <span class="n">connection_settings</span><span class="o">=</span><span class="n">mysql_settings</span><span class="p">,</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>    <span class="n">log_file</span><span class="o">=</span><span class="n">log_file</span><span class="p">,</span> 
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>    <span class="n">log_pos</span><span class="o">=</span><span class="n">log_pos</span><span class="p">,</span> 
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>    <span class="n">resume_stream</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>    <span class="n">only_events</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>        <span class="n">WriteRowsEvent</span><span class="p">,</span> 
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>        <span class="n">UpdateRowsEvent</span><span class="p">,</span> 
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>        <span class="n">DeleteRowsEvent</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>    <span class="p">]</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="p">)</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="c1"># Process the binary log events</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="k">for</span> <span class="n">binlog_event</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>    <span class="c1"># Process</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>    <span class="k">pass</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="c1"># Close connection</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="n">stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></code></pre></div>
<h3 id="tiedostot">Tiedostot</h3>
<p>TODO: Tiedon jäsentyneisyyden tasot: Structured, Semi-structured, Unstructured.</p>
<h3 id="api">API</h3>
<p>TODO: REST, GraphQL</p>
<h3 id="iot">IoT</h3>
<p>TODO: MQTT</p>
<h3 id="streaming">Streaming</h3>
<p>TODO: Pub/sub</p>
<h3 id="web-pages">Web pages</h3>
<p>TODO: Scraping</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 <a href="https://www.kamk.fi">Kajaanin Ammattikorkeakoulu Oy</a>. 
Licenced under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/">BY-NC-ND 4.0</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.annotate", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Kopioitu leikep\u00f6yd\u00e4lle", "clipboard.copy": "Kopioi leikep\u00f6yd\u00e4lle", "search.result.more.one": "1 lis\u00e4\u00e4 t\u00e4ll\u00e4 sivulla", "search.result.more.other": "# lis\u00e4\u00e4 t\u00e4ll\u00e4 sivulla", "search.result.none": "Ei t\u00e4sm\u00e4\u00e4vi\u00e4 dokumentteja", "search.result.one": "1 t\u00e4sm\u00e4\u00e4v\u00e4 dokumentti", "search.result.other": "# t\u00e4sm\u00e4\u00e4v\u00e4\u00e4 dokumenttia", "search.result.placeholder": "Kirjoita aloittaaksesi haun", "search.result.term.missing": "Puuttuu", "select.version": "Valitse versio"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>